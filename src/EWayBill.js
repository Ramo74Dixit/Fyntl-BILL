import React from "react";
import Barcode from 'react-barcode';
import { QRCodeCanvas } from 'qrcode.react';
import './EWayBill.css'; 

const EWayBill = ({ billData }) => {
  const {
    docType = "Not Provided",
    docNo = "Not Provided",
    docDate = "Not Provided",
    fromGstin = "Not Provided",
    fromTrdName = "Not Provided",
    fromAddr1 = "Not Provided",
    fromAddr2 = "Not Provided",
    fromPlace = "Not Provided",
    fromPincode = "Not Provided",
    toGstin = "Not Provided",
    toTrdName = "Not Provided",
    toAddr1 = "Not Provided",
    toAddr2 = "Not Provided",
    toPlace = "Not Provided",
    toPincode = "Not Provided",
    totalValue = "Not Provided",
    cgstValue = "Not Provided",
    sgstValue = "Not Provided",
    igstValue = "Not Provided",
    cessValue = "Not Provided",
    cessNonAdvolValue = "Not Provided",
    totInvValue = "Not Provided",
    transMode = "Not Provided",
    transDistance = "Not Provided",
    transporterName = "Not Provided",
    transporterId = "Not Provided",
    transDocNo = "Not Provided",
    transDocDate = "Not Provided",
    vehicleNo = "Not Provided",
    vehicleType = "Not Provided",
    itemList = [],
    ewayBillNo = "Not Provided",
    generatedDate = "Not Provided",
    generatedBy = "Not Provided",
    validUpto = "Not Provided",
    otherValue = "Not Provided",
    transactionTypeDesc = "Not Provided",
  } = billData;
  
  const qrCodeValue = `eWay Bill No: ${ewayBillNo || "N/A"}, Validity Time: ${billData.validity_time || "N/A"}, Generated Time: ${billData.generated_time || "N/A"}`;

  return (
    <div className="ewaybill-container">
      <div className="ewaybill-header">
        <h1>E-Way Bill</h1>
        <div className="qr-code">
          <QRCodeCanvas 
            value={qrCodeValue} 
            className="qr-code-style" 
          />
        </div>
      </div>

      <div className="ewaybill-section">
        <h2>1. E-WAY BILL Details</h2>
        <div className="details-row">
          <p><strong>eWay Bill No:</strong> {ewayBillNo}</p>
          <p><strong>Generated Date:</strong> {generatedDate}</p>
        </div>
        <div className="details-row">
          <p><strong>Generated By:</strong> {generatedBy}</p>
          <p><strong>Valid Upto:</strong> {validUpto}</p>
        </div>
      </div>

      <div className="address-section">
        <h2>2. Address Details</h2>
        <div className="address-container">
          <div className="address-block">
            <h3>From</h3>
            <p><strong>GSTIN:</strong> {fromGstin}</p>
            <p>{fromTrdName}</p>
            <p>{fromAddr1}, {fromAddr2}, {fromPlace}, {fromPincode}</p>
          </div>
          <div className="address-block">
            <h3>To</h3>
            <p><strong>GSTIN:</strong> {toGstin}</p>
            <p>{toTrdName}</p>
            <p>{toAddr1}, {toAddr2}, {toPlace}, {toPincode}</p>
          </div>
        </div>
      </div>

      <div className="goods-details">
        <h2>3. Goods Details</h2>
        <table>
          <thead>
            <tr>
              <th>HSN</th>
              <th>Product & Desc.</th>
              <th>Quantity</th>
              <th>Taxable Amount</th>
              <th>Tax Rate (C+S+I+Cess)</th>
            </tr>
          </thead>
          <tbody>
            {itemList.map((item, index) => (
              <tr key={index}>
                <td>{item.hsnCode || "N/A"}</td>
                <td>{item.productName || "N/A"} & {item.productDesc || "N/A"}</td>
                <td>{item.quantity || "N/A"} {item.qtyUnit || "N/A"}</td>
                <td>{item.taxableAmount || "N/A"}</td>
                <td>{item.sgstRate || "N/A"} + {item.cgstRate || "N/A"} + {item.igstRate || "N/A"} + {item.cessRate || "N/A"}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      <div className="transportation-details">
        <h2>4. Transportation Details</h2>
        <p><strong>Transporter ID & Name:</strong> {transporterName || "N/A"}, {transporterId || "N/A"}</p>
        <p><strong>Transporter Doc. No & Date:</strong> {transDocNo || "N/A"}, {transDocDate || "N/A"}</p>
      </div>

      <div className="vehicle-details">
        <h2>5. Vehicle Details</h2>
        <table>
          <thead>
            <tr>
              <th>Mode</th>
              <th>Vehicle / Trans Doc No & Dt.</th>
              <th>From</th>
              <th>Entered Date</th>
              <th>Entered By</th>
              <th>CEWB No.</th>
              <th>Multi Veh. Info</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{transMode || "N/A"}</td>
              <td>{vehicleNo || "N/A"} & {vehicleType || "N/A"}</td>
              <td>{fromAddr1 || "N/A"}</td>
              <td>{generatedDate || "N/A"}</td>
              <td>{generatedBy || "N/A"}</td>
              <td>-</td>
              <td>-</td>
            </tr>
          </tbody>
        </table>

        <div className="barcode-container">
          <Barcode value={ewayBillNo || "N/A"} />
        </div>

        <p>Note: If there is any discrepancy in information please try again after some time.</p>
      </div>
    </div>
  );
};

export default EWayBill;
