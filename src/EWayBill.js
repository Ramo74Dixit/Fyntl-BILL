import React from "react";
import Barcode from 'react-barcode';
import { QRCodeCanvas } from 'qrcode.react'; // or use QRCodeSVG


const EWayBill = ({ billData }) => {
  const {
    docType = "Not Provided",
    docNo = "Not Provided",
    docDate = "Not Provided",
    fromGstin = "Not Provided",
    fromTrdName = "Not Provided",
    fromAddr1 = "Not Provided",
    fromAddr2 = "Not Provided",
    fromPlace = "Not Provided",
    fromPincode = "Not Provided",
    toGstin = "Not Provided",
    toTrdName = "Not Provided",
    toAddr1 = "Not Provided",
    toAddr2 = "Not Provided",
    toPlace = "Not Provided",
    toPincode = "Not Provided",
    totalValue = "Not Provided",
    cgstValue = "Not Provided",
    sgstValue = "Not Provided",
    igstValue = "Not Provided",
    cessValue = "Not Provided",
    cessNonAdvolValue = "Not Provided",
    totInvValue = "Not Provided",
    transMode = "Not Provided",
    transDistance = "Not Provided",
    transporterName = "Not Provided",
    transporterId = "Not Provided",
    transDocNo = "Not Provided",
    transDocDate = "Not Provided",
    vehicleNo = "Not Provided",
    vehicleType = "Not Provided",
    itemList = [],
    ewayBillNo = "Not Provided",
    generatedDate = "Not Provided",
    generatedBy = "Not Provided",
    validUpto = "Not Provided",
    otherValue = "Not Provided",
    transactionTypeDesc = "Not Provided",
  } = billData;
  const qrCodeValue = `eWay Bill No: ${ewayBillNo || "N/A"}, Validity Time: ${billData.validity_time || "N/A"}, Generated Time: ${billData.generated_time || "N/A"}`;

  return (
    <div className="mx-5 my-5 p-5 bg-white shadow-lg rounded-lg border">
     <div className="flex items-center justify-between mb-6">
        <h1 className="font-bold mt-6 mb-3 text-2xl">E-Way Bill</h1>
        <div className="flex flex-col items-center">
          <QRCodeCanvas value={qrCodeValue} />
        </div>
      </div>

      <div className="border border-gray-300 mb-5">
        <h2 className="bg-[#736fb3] text-black p-2 text-xl">
          1. E-WAY BILL Details
        </h2>
      
        <div className=" p-2 border flex justify-between">
          <p>
            <span className="font-normal">eWay Bill No:</span>{" "}
            <span className="font-bold">{ewayBillNo || "N/A"}</span>
          </p>
          <p>
            <span className="font-normal">Generated Date:</span>{" "}
            <span className="font-bold">{generatedDate || "N/A"}</span>
          </p>
          <div>
            <p>
              <span className="font-normal">Generated By:</span>{" "}
              <span className="font-bold">{generatedBy || "N/A"}</span>
            </p>
            <p>
              <span className="font-normal">Valid Upto:</span>{" "}
              <span className="font-bold">{validUpto || "N/A"}</span>
            </p>
          </div>
        </div>
        <div className=" p-2 border flex ">
          <p>
            <span className="font-normal">Mode:</span>{" "}
            <span className="font-bold">{transMode || "N/A"}</span>
          </p>
          <p className="text-left ml-[27vw] ">
            <span className="font-normal">Approx Distance:</span>{" "}
            <span className="font-bold">{transDistance || "N/A"}</span>
          </p>
          <p>
            <span className="font-normal"></span>{" "}
            <span className="font-bold"></span>
          </p>
        </div>
        <div className=" p-2 border flex justify-between">
          <p>
            <span className="font-normal">Type: </span>{" "}
            <span className="font-bold">{transactionTypeDesc || "N/A"}</span>
          </p>
          <p>
            <span className="font-normal">Document Details:</span>{" "}
            <span className="font-bold">
              {docType} - {docNo} - {docDate}
            </span>
          </p>
          <p>
            <span className="font-normal">Transaction Type: </span>{" "}
            <span className="font-bold">{transactionTypeDesc || "N/A"}</span>
          </p>
        </div>
      </div>

      <h4 className="bg-[#736fb3] text-black text-xl p-2 mb-3">
        2. Address Details
      </h4>
      <div className="flex justify-between mb-5">
        {/* From Details Section */}
        <div className="w-1/2 border bg-transparent mr-3">
          <h2 className="bg-[#736fb3] text-black p-2">From</h2>
          <div className="p-3">
            <p>
              <span className="font-normal">GSTIN: </span>{" "}
              <span className="font-bold">{fromGstin || "N/A"}</span>
            </p>
            <p>
              <span className="font-normal">{fromTrdName || "N/A"}</span>
            </p>
            <br />

            <p className="font-normal">:: Dispatch From ::</p>
            <p>
              <span className="font-normal mb-7">
                {fromAddr1}, <br />
                {fromAddr2}, {fromPlace}, {fromPincode}
              </span>
            </p>
          </div>
        </div>

        {/* To Details Section */}
        <div className=" w-1/2 border border-gray-300 bg-white flex-1">
          <h2 className="bg-[#736fb3] text-black p-2">To</h2>
          <div className="p-3">
            <p>
              <span className="font-normal">GSTIN: </span>{" "}
              <span className="font-bold">{toGstin || "N/A"}</span>
            </p>
            <p>
              <span className="font-normal">{toTrdName || "N/A"}</span>
            </p>
            <br />

            <p className="font-normal">:: Shipped From ::</p>
            <p>
              <span className="font-normal mb-7">
                {toAddr1}, <br />
                {toAddr2}, {toPlace}, {toPincode}
              </span>
            </p>
          </div>
        </div>
      </div>

      <div className="border border-gray-300 pt-0 mb-5 bg-white">
        <h2 className="bg-[#736fb3] text-black font-semibold p-2 text-xl">
          3. Goods Details
        </h2>
        <table className="w-full border-collapse mt-1">
          <thead>
            <tr>
              <th className="border border-gray-300 p-2">HSN Code</th>
              <th className="border border-gray-300 p-2">
                Product Name & Desc.
              </th>
              <th className="border border-gray-300 p-2">Quantity</th>
              <th className="border border-gray-300 p-2">Taxable Amount Rs.</th>
              <th className="border border-gray-300 p-2">
                Tax Rate (C+S+I+Cess+Cess Non.Advol)
              </th>
            </tr>
          </thead>
          <tbody>
            {itemList.map((item, index) => (
              <tr key={index}>
                <td className="border border-gray-300 p-2 text-center">
                  {item.hsnCode || "Not Provided"}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {item.productName || "Not Provided"} &{" "}
                  {item.productDesc || "Not Provided"}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {item.quantity || "Not Provided"}{" "}
                  {item.qtyUnit || "Not Provided"}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {item.taxableAmount || "Not Provided"}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {item.sgstRate || "Not Provided"} +
                  {item.cgstRate || "Not Provided"} +
                  {item.igstRate || "Not Provided"} +
                  {item.cessRate || "Not Provided"}
                </td>
              </tr>
            ))}
          </tbody>
        </table>
        <table className="w-full border-collapse mt-5">
          <thead>
            <tr>
              <th className="border border-gray-300 p-2">Tot. Taxable Amt</th>
              <th className="border border-gray-300 p-2">CGST Amt</th>
              <th className="border border-gray-300 p-2">SGST Amt</th>
              <th className="border border-gray-300 p-2">IGST Amt</th>
              <th className="border border-gray-300 p-2">CESS Amt</th>
              <th className="border border-gray-300 p-2">CESS Non.Advol Amt</th>
              <th className="border border-gray-300 p-2">Other Amt</th>
              <th className="border border-gray-300 p-2">Total Inv. Amount</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td className="border border-gray-300 p-2 text-center ">
                <div className="p-2 border border-gray-300 bg-white rounded">
                  {totalValue || "Not Provided"}
                </div>
              </td>
              <td className="border border-gray-300 p-2 text-center ">
                <div className="p-2 border border-gray-300 bg-white rounded">
                  {cgstValue || "Not Provided"}
                </div>
              </td>
              <td className="border border-gray-300 p-2 text-center">
                <div className="p-2 border border-gray-300 bg-white rounded">
                  {sgstValue || "Not Provided"}
                </div>
              </td>
              <td className="border border-gray-300 p-2 text-center ">
                <div className="p-2 border border-gray-300 bg-white rounded">
                  {igstValue || "Not Provided"}
                </div>
              </td>
              <td className="border border-gray-300 p-2 text-center ">
                <div className="p-2 border border-gray-300 bg-white rounded">
                  {cessValue || "Not Provided"}
                </div>
              </td>
              <td className="border border-gray-300 p-2 text-center">
                <div className="p-2 border border-gray-300 bg-white rounded">
                  {cessNonAdvolValue || "Not Provided"}
                </div>
              </td>
              <td className="border border-gray-300 p-2 text-center">
                <div className="p-2 border border-gray-300 bg-white rounded">
                  {otherValue || "Not Provided"}
                </div>
              </td>
              <td className="border border-gray-300 p-2 text-center">
                <div className="p-2 border border-gray-300 bg-white rounded">
                  {totInvValue || "Not Provided"}
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div className="border border-gray-300 mb-5 bg-white">
        <h2 className="bg-[#736fb3] text-black font-semibold p-2 text-xl">
          4. Transportation Details
        </h2>

        <div className="flex justify-between p-2">
          <div className="flex items-center">
            <span className="font-normal mr-2">Transporter ID & Name:</span>
            <span className="font-normal">
              {transporterName || "N/A"}, {transporterId || "N/A"}
            </span>
          </div>
          <div className="flex items-center">
            <span className="font-normal mr-2">
              Transporter Doc. No & Date:
            </span>
            <span className="font-normal">
              {transDocNo || "N/A"}, {transDocDate || "N/A"}
            </span>
          </div>
        </div>
      </div>

      <div className="border border-gray-300 bg-white mb-5">
        <h2 className="bg-[#736fb3] text-black font-semibold p-2 text-xl">
          5. Vehicle Details
        </h2>
        <table className="w-full border-collapse mt-2">
          <thead>
            <tr>
              <th className="border border-gray-300 p-2">Mode</th>
              <th className="border border-gray-300 p-2">
                Vehicle / Trans Doc No & Dt.
              </th>
              <th className="border border-gray-300 p-2">From</th>
              <th className="border border-gray-300 p-2">Entered Date</th>
              <th className="border border-gray-300 p-2">
                Entered By
              </th>
              <th className="border border-gray-300 p-2">CEWB No. (if any)</th>
              <th className="border border-gray-300 p-2">Multi Veh.Info (if any) </th>

            </tr>
          </thead>
          <tbody>
            {itemList.map((item, index) => (
              <tr key={index}>
                <td className="border border-gray-300 p-2 text-center">
                  {transMode || "Not Provided"}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {vehicleNo || "Not Provided"} &{" "}
                  {vehicleType || "Not Provided"}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {fromAddr1 || "Not Provided"}{" "}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {generatedDate || "Not Provided"}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {generatedBy|| "Not Provided"}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {"-"|| "Not Provided"}
                </td>
                <td className="border border-gray-300 p-2 text-center">
                  {"-"|| "Not Provided"}
                </td>

              </tr>
            ))}
          </tbody>
        </table>
<div className="flex justify-center items-center">
      <Barcode value={ewayBillNo || "N/A"} />

</div>
<div className="border p-5 mb-2">
  <p></p>
</div>
Note*: If there is any discrepancy in information please try again after sometime.

      </div>
    </div>
  );
};

export default EWayBill;
